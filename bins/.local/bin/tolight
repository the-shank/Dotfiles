#!/bin/bash

# Update themes for:
# [x] xfce-terminal
# [x] nvim
# [x] gtk theme
# [x] mousepad

set -eu
set -o pipefail

# xfce-terminal
xfconf-query --channel xfce4-terminal --property /color-background --set "#fdf6e3"
xfconf-query --channel xfce4-terminal --property /color-background-vary --set false
xfconf-query --channel xfce4-terminal --property /color-bold --set "#073642"
xfconf-query --channel xfce4-terminal --property /color-bold-is-bright --set true
xfconf-query --channel xfce4-terminal --property /color-bold-use-default --set false
xfconf-query --channel xfce4-terminal --property /color-cursor --set "#073642"
xfconf-query --channel xfce4-terminal --property /color-cursor-use-default --set true
xfconf-query --channel xfce4-terminal --property /color-foreground --set "#073642"
xfconf-query --channel xfce4-terminal --property /color-palette --set "#073642;#dc322f;#859900;#b58900;#268bd2;#d33682;#2aa198;#eee8d5;#002b36;#cb4b16;#586e75;#657b83;#839496;#6c71c4;#93a1a1;#fdf6e3"
xfconf-query --channel xfce4-terminal --property /color-selection-use-default --set true
xfconf-query --channel xfce4-terminal --property /color-use-theme --set false
xfconf-query --channel xfce4-terminal --property /tab-activity-color --set "#dc322f"

# nvim
FILE=$HOME/.config/nvim/lua/custom/chadrc.lua
sed -i -e 's/theme = "everforest"/theme = "everforest_light"/' $FILE
sed -i -e 's/theme_toggle = { "everforest", "everforest_light" }/theme_toggle = { "everforest_light", "everforest" }/' $FILE

# gtk theme
# ref: https://felix-kling.de/blog/2021/linux-toggle-dark-mode.html
FILE=$HOME/.xsettingsd
if ! grep -q "Net/ApplicationPreferDarkTheme" ${FILE}; then
	echo "Net/ApplicationPreferDarkTheme 0" >>$FILE
else
	sed -i -e 's#Net/ApplicationPreferDarkTheme 1#Net/ApplicationPreferDarkTheme 0#' $FILE
fi
if ! grep -q "Gtk/ApplicationPreferDarkTheme" ${FILE}; then
	echo "Gtk/ApplicationPreferDarkTheme 0" >>$FILE
else
	sed -i -e 's#Gtk/ApplicationPreferDarkTheme 1#Gtk/ApplicationPreferDarkTheme 0#' $FILE
fi
if ! grep -q "Net/ThemeName" $FILE; then
	echo "Net/ThemeName \"Arc\"" >>$FILE
else
	sed -i -e 's#Net/ThemeName "Arc-Dark"#Net/ThemeName "Arc"#' $FILE
fi
if ! grep -q "Gtk/ThemeName" $FILE; then
	echo "Gtk/ThemeName \"Arc\"" >>$FILE
else
	sed -i -e 's#Gtk/ThemeName "Arc-Dark"#Gtk/ThemeName "Arc"#' $FILE
fi
killall -HUP xsettingsd
i3-msg reload

# mousepad
# ref: https://docs.xfce.org/apps/mousepad/start
gsettings set org.xfce.mousepad.preferences.view color-scheme solarized-light
